var e=function(e,t){if(!e)throw new Error(t)},t=function(e){this._definitions={},this._factory=[],e&&this.batchSet(e)};switch(t.prototype={batchSet:function(t){var n=this;return e(arguments.length>=1,"One argument required"),e("object"==typeof t&&null!==t,"Expected argument values to be Object"),Object.keys(t).forEach(function(e){n.set(e,t[e])}),this},has:function(e){return"undefined"!=typeof this._definitions[e]},set:function(t,n){e(arguments.length>=2,"Two arguments required"),e("string"==typeof t,"Expected string id"),e(this.has(t)===!1,'Identifier "%s" already defined'.replace("%s",t));var i="function"==typeof n,r=i&&this._factory.indexOf(n)!==-1;return this._definitions[t]=i?{func:r?n:this._single(n)}:{value:n},r&&this._factory.splice(this._factory.indexOf(n),1),this},get:function(t){e(arguments.length>=1,"One argument required"),e("string"==typeof t,"Expected string id"),e(this.has(t)===!0,'Identifier "%s" is not defined'.replace("%s",t));var n=this._definitions[t],i=Object.keys(n).indexOf("value")!==-1;return i?n.value:n.func(this)},factory:function(t){return e(arguments.length>=1,"One argument required"),e("function"==typeof t,"Expected function func"),this._factory.push(t),t},keys:function(){return Object.keys(this._definitions)},_single:function(e){return function(t){return this.value=e(t),this.value}}},t.prototype.register=t.prototype.set,!0){case"undefined"!=typeof module&&"undefined"!=typeof module.exports:module.exports=t;break;case"function"==typeof define&&define.amd:define([],function(){return t});break;default:window.Di=t}